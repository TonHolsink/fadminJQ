<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang="nl">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- HTTP 1.1 -->
		<meta http-equiv="Cache-Control" content="no-store"/>
		<!-- HTTP 1.0 -->
		<meta http-equiv="Pragma" content="no-cache"/>
		<!-- Prevents caching at the Proxy Server -->
		<meta http-equiv="Expires" content="0"/>
		<meta name="robots" content="noindex"/>
		<meta name="author" content="YourRequest BV"/>
		<link rel="icon" href="resources/images/favicon.ico"/>
		<title>Mijn Politie</title>
		<link rel="stylesheet" type="text/css" media="all" href="resources/styles/style.css" />
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<!--[if lt IE 7]>
		<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->
		<header class="navbar navbar-default">
			<div class="container">
				<div class="headerStripeContainer">
					<div class="headerStripe"></div>
				</div>
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html"><img src="resources/images/fraudnet-logo.png" /></a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">
						<li><a href="index.html">Home<span class="sr-only">(current)</span></a></li>
						<li><a href="dashboard.html">Dashboard</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">
								<i class="fa fa-user fa-fw"></i>
								gebruiker
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="profiel.html">Mijn Profiel</a></li>
								<li><a href="#">Instellingen</a></li>
								<li><a href="login.html">Uitloggen</a></li>
							</ul>
						</li>
					</ul>
				</div><!-- /.navbar-collapse -->
				<div id="messageBlock"></div>
			</div><!-- /.container -->
		</header>
		<div class="container">
			<div class="main-content">
				<div class="content-area">
					<div class="breadcrumb-row">
						<ul class="breadcrumb">
							<li>
								<a href="index.html">Home</a>
							</li>
							<li class="active">Meldingen</li>
						</ul>
					</div>
					<div class="page-header">
						<h1 id="pageTitle">Meldingen</h1>
					</div>


						<div id="avs">
							<div id="searchIt">
								<p class="margin-top">De zoekfunctie controleert of het zoekargument voorkomt in een of meer van de velden regnr, klantid, datum of delict.</p>
								<div class="text-right">
									<form id="searchform" class="form-inline" role="form">
										<div class="form-group">
											<div class="input-group">
												<input type="text" id="searchTerm" class="form-control" value="012860000000246" autofocus="autofocus" placeholder="type uw zoekargument" maxlength="30" onkeyup="return entsub(event, 200)" onclick="this.select()"/>
												<span class="input-group-addon btn btn-primary"><i class="fa fa-search fa-fw"></i></span>
											</div>
											<img src="resources/images/spinner.gif" id="zoekspinner" style="visibility: hidden"/>
										</div>
									</form>
								</div>
							</div>

							<div id="avsTable" class="margin-top">
								<form id="itemsForm" method="post" action="/yourrequest/aangiftes.html">
									<div id="counter">
										<input type="hidden" name="pageNumber" value="1" />
										<input type="hidden" name="totalPages" value="1" />
										<input type="hidden" name="totalRecords" value="0" />
										<input type="hidden" name="actie" value="" />
										<input type="hidden" name="sortKey" value="itemnumber" />
										<input type="hidden" name="sortDirection" value="desc" />
										<input type="hidden" name="searchCriterium" value="-10" />
										<input type="hidden" name="searchTerm" value="012860000000246" />
										<input type="hidden" name="serviceID" value="200" />
										<input type="hidden" name="listForSupplier" value="" />
									</div>
									<div class="table-responsive">
										<table class="table table-condensed table-striped table-hover">
											<thead>
												<tr>
													<th id="number">
														<a href="javascript:doSubmit('sort','itemnumber');">
														Regnr
														</a>
														<img src="resources/images/arrow_up.gif"/>
													</th>
													<th class="customernumber">
														<div class="customernumber">
															Klantid
														</div>
													</th>
													<th id="viewed">
														AVS
													</th>
													<th id="date">
														<a href="javascript:doSubmit('sort','datum');">
														Datum
														</a>
													</th>
													<th class="text">
														<div class="text">
															Delict
														</div>
													</th>
													<th class="statusname">
														Status/voortgang
													</th>
													<th class="w10" title="Intrekken"></th>
												</tr>
											</thead>
											<tbody id="tbodyResult">
												<tr data-orderID="9118931" class="pointer">
													<td>
														012860000000246
													</td>
													<td data-customerID="816263" class="as-link">
														123456782
													</td>
													<td data-tip="Laatste keer:17-12-2014" class="center tip">
													</td>
													<td>
														17-12-2014
													</td>
													<td class="text">
														Internetoplichting
													</td>
													<td>
														Nieuwe aangifte
													</td>
													<td data-action="DEL" title="Aangifte intrekken">
														<i data-action="DEL" class="fa fa-times fa-lg fg-danger"></i>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</form>

							</div> <!--  #avsTable -->

							<div class="marginTop">
								<a class="morelink" href="javascript:openMap();">Kaartoverzicht delictplaats(en)</a>
							</div>
						</div> <!-- listitems -->

						<div id="withdraw" class="panel panel-default popupMsg" style="display: none;">
							<div class="panel-headings">
								<div class="panel-heading">
									<strong>Uw aangifte internetoplichting intrekken</strong>
									<button	id="closeWithdraw" type="button" class="close">&times;<span class="sr-only">Close</span></button>
								</div>
							</div>
							<div class="panel-body">
								<form id="itemsForm" method="post" action="/yourrequest/melding_intrekken_list.html">
									<table class="table">
										<tr>
											<td class="col1">Reden</td>
											<td class="col2">
												<select name="withdrawReason" onclick="checkIntrekken(this)">
													<option value="">Kies</option>
													<option value="MIO_IGOED">Goederen geleverd</option>
													<option value="MIO_IGELD">Geld teruggekregen</option>
													<option value="MIO_IANDERS">Anders...</option>
												</select>
											</td>
										</tr>
										<tr id="withdraw_other_row" class="hidden">
											<td class="col1">Reden intrekken</td>
											<td class="col2">
												<input type="text" name="withdrawReasonOther" maxlength="200" size="40" value="" />
											</td>
										</tr>
										<tr>
											<td class="right" colspan="2">
												<input type="hidden" name="itemID" value="" id="withdrawID" />
												<input type="submit" value="Intrekken" class="btn btn-primary"/>
											</td>
										</tr>
									</table>
								</form>
							</div> <!-- .panel-body -->
						</div> <!-- #withdraw -->


				</div> <!-- .content-area -->
			</div> <!-- .main-content -->
		</div> <!-- .container -->
		<!-- footer -->
		<div class="container margin-top">
			<footer>
				<div class="text-right">
					&copy;
					2015
					<a href="http://www.yourrequest.nl" class="targetblank">YourRequest</a>
				</div>
			</footer>
		</div> <!-- .container -->
		<!-- footer -->
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="resources/scripts/vendor/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="resources/scripts/vendor/bootstrap.min.js"></script>
		<script src="resources/scripts/vendor/toastr.min.js"></script>

		<script type="text/javascript">
			//<![CDATA
				(function() {

					$(function() {
						$('a.targetblank').each(function(idx, el) {
							el.target = '_blank';
						});
					});

				})();

			//]]>
		</script>
		<!-- local script to bottom -->
		<script type="text/javascript">
			//<![CDATA[
				(function() {

					this.doSubmit = function(actie, sortKey, serviceID) {

						document.forms[1].actie.value = actie;
						var newSort = false;
						var sortDirection;
						var searchTerm;
						var savedSearchTerm;
						if (sortKey.length > 0) {
							/**
							 * Controleer of we op een nieuw element gaan sorteren
							 */
							if (sortKey.toLowerCase() != document.forms[1].sortKey.value.toLowerCase()) {
								newSort = true;
							}
							document.forms[1].sortKey.value = sortKey;
						} else {
							sortKey = document.forms[1].sortKey.value;
						}

						if (sortKey.length > 0 && actie.toLowerCase() == 'sort') {
							if (newSort) {
								if (sortKey.toLowerCase() == 'itemnumber' || sortKey.toLowerCase() =='datum') {
									sortDirection = 'desc';
								} else {
									sortDirection = 'asc';
								}
							}
							else {
								sortDirection = document.forms[1].sortDirection.value;
								if (sortDirection.toLowerCase() == 'asc') {
									sortDirection = 'desc';
								} else if (sortDirection.toLowerCase() == 'desc') {
									sortDirection = 'asc';
								} else {
									sortDirection = 'desc';
								}
							}
							document.forms[1].sortDirection.value = sortDirection;
						}

						searchTerm = document.forms[0].searchTerm.value;
						if (searchTerm.length > 0) {
							if (searchTerm.toLowerCase() != 'type uw zoekargument') {
								document.forms[1].searchTerm.value = searchTerm;
								document.forms[1].searchCriterium.value = -10;
							}
						}

						savedSearchTerm = document.forms[1].searchTerm.value;
						if (savedSearchTerm.length > 0) {
							var searchAction;
							if (serviceID = '200') {
							searchAction = 'searchAVS.html';
							} else if (serviceID = '300') {
							searchAction = 'searchBVS.html';
							}
							document.forms[1].action="/yourrequest/" + searchAction + "?serviceID=" + serviceID;
						}

						$('#zoekspinner').css({visibility: 'visible'});
						document.forms[1].submit();
					};

					this.entsub = function(event,serviceID) {
						if (window.event && window.event.keyCode == 13) {
							doSubmit('','', serviceID);
							return false;
						} else if (event && event.which == 13) {
							doSubmit('','', serviceID);
							return false;
						} else	{
							return true;
						}
					};

					this.openMap = function() {
						window.open('listAVSMap.html', 'Popup', 'toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=600,height=500,left=200,top=100');
					};

					this.checkIntrekken = function(element) {
						if (element.value=='MIO_IANDERS') {
							$('withdraw_other_row').setStyle({display: ''});
						} else {
							$('withdraw_other_row').setStyle({display: 'none'});
							var theForm = document.forms[1];
							theForm['withdrawReasonOther'].value = '';
						}
					};

					this.checkIntrekkenSubmit = function() {
						var theForm = document.forms[1];
						if (theForm['withdrawReason'].value == '') {
							alert('Geef een reden voor het intrekken van uw melding');
							return false;
						} else {
							var dowithdraw=confirm("Let op: trek alleen uw melding in als de\n" +
									"kwestie inderdaad opgelost is en u het goed alsnog\n " +
									"ontvangen heeft dan wel het geld teruggestort heeft\n " +
									"gekregen.");
							if (dowithdraw) {
								return true;
							} else {
								return false;
							}
						}
					};

					function openWithdraw(itemid, event) {
						// var pos = Event.pointer(event);
						var posX = event.pageX - 400;
						if (posX < 0) {
							posX = 0;
						}
						alert(posX);
						var styles= {top: (event.pageY - 50) + 'px', left: posX + 'px'};
						$('#withdrawID').val(itemid);
						$('#withdraw').css(styles).show();

					};


					$(function() {

						$('#tbodyResult').on('click', function(event) {
							var $el = $(event.target);
							if ($el.attr('data-customerID')) {
								document.location='viewCustomerProfile.html?customerID=' + $el.attr('data-customerID');
							} else if ($el.attr('data-compCustomerID')) {
								document.location='viewCompanyProfile.html?customerID=' + $el.attr('data-compCustomerID');
							} else if ($el.attr('data-action')) {
								var action = $el.attr('data-action');
								var orderID = $el.parents('tr').attr('data-orderID');
								if (action == 'DEL') {
									openWithdraw(orderID, event);
								}
							} else {
								var row = $el.parents('tr');
								if (row.length > 0) document.location='aangifte.html?itemID=' + row.attr('data-orderID');
							}
						});

						$('#closeWithdraw').on('click', function() {
							$('#withdraw').hide();
						})

					});

				})();
			//]]>
		</script>
		<script type="text/javascript">
			//<![CDATA[
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

				ga('create', 'XX-XXXXXXXX-X', 'auto');
				ga('send', 'pageview');
			//]]>
		</script>
	</body>
</html>